{% comment %}
  Responsive image with WebP support
  
  Automatically serves WebP with fallback to original format.
  For images in /images/, WebP version should be side-by-side with original.
  
  Usage:
    {% include responsive-image.html 
       src="/images/2019-01-21-password-entry.png" 
       alt="Password Entry Screen"
       title="1Password entry form"
       width="1200"
       height="800"
    %}
  
  Parameters:
    - src (required): Path to the image
    - alt (required): Alt text for accessibility
    - title (optional): Title text shown on hover
    - width (optional): Image width for aspect ratio
    - height (optional): Image height for aspect ratio
    - class (optional): Additional CSS classes
{% endcomment %}

{% assign img_path = include.src %}
{% assign img_ext = img_path | split: '.' | last %}
{% assign img_base = img_path | remove: '.' | remove: img_ext %}
{% assign webp_path = img_base | append: '.webp' %}

<picture>
  <source 
    srcset="{{ webp_path }}" 
    type="image/webp"
  />
  <img 
    src="{{ img_path }}" 
    alt="{{ include.alt }}"
    {% if include.title %}title="{{ include.title }}"{% endif %}
    {% if include.width %}width="{{ include.width }}"{% endif %}
    {% if include.height %}height="{{ include.height }}"{% endif %}
    {% if include.class %}class="{{ include.class }}"{% else %}class="responsive-image"{% endif %}
    loading="lazy"
  />
</picture>
